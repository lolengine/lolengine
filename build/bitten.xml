<build xmlns:sh="http://bitten.edgewall.org/tools/sh"
       xmlns:svn="http://bitten.edgewall.org/tools/svn"
       xmlns:c="http://bitten.edgewall.org/tools/c">
  <step id="checkout" description="Checkout source from repository">
    <svn:checkout url="svn://svn.zoy.org/lolengine/"
      path="${path}" revision="${revision}" />
  </step>
  <step id="bootstrap" description="Bootstrap build system">
    <sh:exec file="sh" args="-c '
      case ${platform} in
        android-arm|ios-arm|ps3-ppu) : ; ;;
        *) ./bootstrap ;;
      esac
      '"/>
  </step>
  <step id="configure" description="Configure tree">
    <sh:exec file="sh" args="-c '
      case ${platform} in
        android-arm|ios-arm|ps3-ppu) : ; ;;
        *) ./configure ;;
      esac
      '"/>
    <sh:exec file="./configure" args=""/>
  </step>
  <step id="build" description="Build tree">
    <sh:exec file="sh" args="-c '
      case ${platform} in
        android-arm)
         cd monsterz/android;
         ndk-build;
         ant compile;
         ;;
        ios-arm)
         :;
         ;;
        ps3-ppu)
         ./build-ps3;
         ;;
        *)
         make;
         ;;
      esac
      '"/>
  </step>
  <step id="test" description="Run tests">
    <sh:exec file="sh" args="-c '
      case ${platform} in
        android-arm|ios-arm|ps3-ppu) : ; ;;
        *) make check; ;;
      esac
      '"/>
  </step>
  <step id="clean" description="Clean tree">
    <sh:exec file="sh" args="-c '
      case ${platform} in
        android-arm|ios-arm) : ; ;;
        *) make distclean; ;;
      esac
      '"/>
  </step>
</build>
